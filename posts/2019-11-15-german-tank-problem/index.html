<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>the German tank problem | The Simon Research Ensemble</title><link rel=canonical href=https://simonensemble.github.io/posts/2019-11-15-german-tank-problem/><meta name=description content="we are a mathematical and computational research group at Oregon State University, in the School of Chemical, Biological, and Environmental Engineering."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="the German tank problem"><meta property="og:description" content="author: Cory Simon
The German tank problem [1] is intellectually stimulating and makes great conversation at wine bars. The problem has a historical context as well [2].
During World War 2, the Germans inscribed their tanks with sequential serial numbers $1,2,&mldr;,n$ when they were manufactured. The total number of tanks $n$ that the Germans had, however, was unknown to the Allied forces&ndash; and of great interest.
The Allies captured a (assumed) random sample of $k$ tanks from the German forces (without replacement, of course) and observed their serial numbers, $x_1,x_2,&mldr;,x_k$."><meta property="og:type" content="article"><meta property="og:url" content="https://simonensemble.github.io/posts/2019-11-15-german-tank-problem/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-11-15T00:00:00+00:00"><meta property="article:modified_time" content="2019-11-15T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="the German tank problem"><meta name=twitter:description content="author: Cory Simon
The German tank problem [1] is intellectually stimulating and makes great conversation at wine bars. The problem has a historical context as well [2].
During World War 2, the Germans inscribed their tanks with sequential serial numbers $1,2,&mldr;,n$ when they were manufactured. The total number of tanks $n$ that the Germans had, however, was unknown to the Allied forces&ndash; and of great interest.
The Allies captured a (assumed) random sample of $k$ tanks from the German forces (without replacement, of course) and observed their serial numbers, $x_1,x_2,&mldr;,x_k$."><link rel=stylesheet href=https://simonensemble.github.io/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="><link rel=stylesheet href=https://simonensemble.github.io/css/custom.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://simonensemble.github.io/images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/students>students</a></li><li><a href=/pubs>pubs</a></li><li><a href=/theprof>the prof</a></li><li><a href=/news>news</a></li><li><a href=/teaching>teaching</a></li><li><a href=/posts>blog</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://simonensemble.github.io/posts/2019-07-07-mo-cage-viz/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=https://simonensemble.github.io/posts/2019-11-29-stars-and-bars/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&text=the%20German%20tank%20problem" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&title=the%20German%20tank%20problem" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&is_video=false&description=the%20German%20tank%20problem" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=the%20German%20tank%20problem&body=Check out this article: https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&title=the%20German%20tank%20problem" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&title=the%20German%20tank%20problem" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&name=the%20German%20tank%20problem&description=author%3a%20Cory%20Simon%0aThe%20German%20tank%20problem%20%5b1%5d%20is%20intellectually%20stimulating%20and%20makes%20great%20conversation%20at%20wine%20bars.%20The%20problem%20has%20a%20historical%20context%20as%20well%20%5b2%5d.%0aDuring%20World%20War%202%2c%20the%20Germans%20inscribed%20their%20tanks%20with%20sequential%20serial%20numbers%20%241%2c2%2c%26hellip%3b%2cn%24%20when%20they%20were%20manufactured.%20The%20total%20number%20of%20tanks%20%24n%24%20that%20the%20Germans%20had%2c%20however%2c%20was%20unknown%20to%20the%20Allied%20forces%26ndash%3b%20and%20of%20great%20interest.%0aThe%20Allies%20captured%20a%20%28assumed%29%20random%20sample%20of%20%24k%24%20tanks%20from%20the%20German%20forces%20%28without%20replacement%2c%20of%20course%29%20and%20observed%20their%20serial%20numbers%2c%20%24x_1%2cx_2%2c%26hellip%3b%2cx_k%24." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&t=the%20German%20tank%20problem" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#the-likelihood-prmmn>the likelihood $Pr(M=m|n)$</a><ul><li><a href=#a-useful-identity-from-the-normalization-of-the-probability-mass-function>a useful identity from the normalization of the probability mass function</a></li></ul></li><li><a href=#the-expected-value-of-the-max-serial-number-emmn>the expected value of the max serial number, $E(M=m|n)$</a></li><li><a href=#an-unbiased-estimator>an unbiased estimator</a></li></ul><ul><li><a href=#update-a-bayesian-treatment-of-the-german-tank-problem>(update) A Bayesian treatment of the German tank problem</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">the German tank problem</h1><div class=meta><div class=postdate><time datetime="2019-11-15 00:00:00 +0000 UTC" itemprop=datePublished>2019-11-15</time></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/statistics rel=tag>statistics</a>
,
<a class=tag-link href=/tags/probability rel=tag>probability</a>
,
<a class=tag-link href=/tags/combinatorics rel=tag>combinatorics</a>
,
<a class=tag-link href=/tags/estimation rel=tag>estimation</a></div></div></header><div class=content itemprop=articleBody><p><em>author</em>: Cory Simon</p><p>The German tank problem [1] is intellectually stimulating and makes great conversation at wine bars. The problem has a historical context as well [2].</p><p>During World War 2, the Germans inscribed their tanks with sequential serial numbers $1,2,&mldr;,n$ when they were manufactured. The total number of tanks $n$ that the Germans had, however, was unknown to the Allied forces&ndash; and of great interest.</p><p>The Allies captured a (assumed) random sample of $k$ tanks from the German forces (without replacement, of course) and observed their serial numbers, $x_1,x_2,&mldr;,x_k$. The German tank problem is to estimate the total number of tanks $n$ from the observed serial numbers $x_1,x_2,&mldr;,x_k$.</p><figure><img src=/blog/german_tank_problem/sample.png alt="A random sample (without replacement) of German tanks and their inscribed serial numbers. Based on this outcome, how many tanks do you estimate the Germans have?"><figcaption><p>A random sample (without replacement) of German tanks and their inscribed serial numbers. Based on this outcome, how many tanks do you estimate the Germans have?</p></figcaption></figure><p>The number of tanks is of course greater than or equal to the maximum serial number observed ($n \geq \max x_i$); given the sample above, estimating that the Germans have fewer than 156 tanks would be absurd. However, estimating that the Germans have 156 tanks seems too conservative; this estimate assumes that we happened to capture the most recently manufactured tank. Intuitively, we should estimate the total number of tanks to be 156 <em>plus some number</em> to reflect the small likelihood that we captured the very last tank to come out of the factory (as opposed to not capturing it). How large should this number be?</p><p>Let&rsquo;s now delve into the math to answer this question, but feel free to skip to <code># an unbiased estimator</code>.</p><h1 id=the-data-generating-process-dgp>the data generating process (dgp)</h1><p>Think of tank capturing as a stochastic process governed by an underlying data generating process (dgp). The data are the set of serial numbers $\{x_1,x_2,&mldr;,x_k\}$. The dgp is a uniform random selection, without replacement, from the set of integers $\{1,2,&mldr;,n\}$. This is our <em>model</em> for the stochastic process of capturing tanks.</p><p>Because all viable outcomes (sets of observed serial numbers) are equally probable, the probability of any particular viable outcome, given we know $n$, is:
$$P({x_1, x_2, &mldr;, x_k} | n)=\dfrac{1}{\binom{n}{k}}$$
A viable outcome is one where $x_i \in {1, 2, &mldr;, n}$ for all $i\in {1,2,&mldr;,k}$. So our dgp is governed by the probability distribution above, which is a uniform distribution over the sample space. The denominator is the cardinality of the sample space&ndash; how many ways we can select $k$ integers from $n$ without replacement, given the order in which they were selected does not matter.</p><h1 id=simulating-the-german-tank-problem-in-julia>simulating the German tank problem in Julia</h1><p>Let&rsquo;s simulate the dgp in the Julia programming language. For elegance, let&rsquo;s first define a data structure for a tank.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-julia data-lang=julia><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#66d9ef>Tank</span>
</span></span><span style=display:flex><span>    serial_nb<span style=color:#f92672>::</span><span style=color:#66d9ef>Int</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tank <span style=color:#f92672>=</span> Tank(<span style=color:#ae81ff>4</span>) <span style=color:#75715e># construct tank with serial number 4.</span>
</span></span></code></pre></div><p>The following function uses the <code>sample</code> function in <code>StatsBase.jl</code> to simulate tank capture. It returns an array of <code>Tank</code>s that were captured.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-julia data-lang=julia><span style=display:flex><span><span style=color:#66d9ef>function</span> capture_tanks(nb_tanks_captured<span style=color:#f92672>::</span><span style=color:#66d9ef>Int</span>, nb_tanks<span style=color:#f92672>::</span><span style=color:#66d9ef>Int</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>#  construct array of tanks w serial numbers 1,2,...,nb_tanks</span>
</span></span><span style=display:flex><span>    tanks <span style=color:#f92672>=</span> [Tank(serial_nb) <span style=color:#66d9ef>for</span> serial_nb <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span>nb_tanks]
</span></span><span style=display:flex><span>    <span style=color:#75715e># return a random selection of these tanks w./o replacement </span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> sample(tanks, nb_tanks_captured, replace<span style=color:#f92672>=</span>false)
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>captured_tanks <span style=color:#f92672>=</span> capture_tanks(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>300</span>) <span style=color:#75715e># an array of captured tanks</span>
</span></span></code></pre></div><p>We&rsquo;ll use this function to simulate tank capture and assess two different estimators for the number of tanks.</p><h1 id=what-is-an-estimator>what is an estimator?</h1><p>An <em>estimator</em> maps an outcome of a random experiment to an estimate of a parameter that characterizes the underlying dgp. In the German tank problem, the outcome is a set of serial numbers on the captured tanks, $\{x_1, x_2, &mldr;, x_k\}$, and the parameter in the dgp we estimate, from the outcome, is the total number of tanks, $n$. We already discussed one estimator of $n$ for the German tank problem: the maximum observed serial number $m\equiv \max x_i$.</p><p>We aim to derive an <em>unbiased</em> estimator, meaning that, on average, the estimator recovers the true value of the parameter in the dgp. The average here is over the ensemble of possible outcomes generated by the dgp.</p><p>The maximum serial number $m$ is a biased estimator because it is either equal to the true value of $n$ (if we happen to capture the most recently manufactured tank) or an underestimate. To illustrate this, I ran 100,000 simulations of our dgp using the <code>capture_tanks</code> function with $n=100$ and $k=5$. The histogram below shows the distribution of the estimated number of tanks using the estimator $m \equiv \max x_i$.</p><figure><img src=/blog/german_tank_problem/max_serial_no.png alt="The maximum serial number observed is a biased estimator of $n$; the average of the estimate over 10,000 simulations is less than the true number of tanks, $n$."><figcaption><p>The maximum serial number observed is a biased estimator of $n$; the average of the estimate over 10,000 simulations is less than the true number of tanks, $n$.</p></figcaption></figure><h1 id=pursuing-an-unbiased-estimator-of-n>pursuing an unbiased estimator of $n$</h1><p>Let us proceed to derive an <em>un</em>biased estimator based on the maximum serial number observed, $m$. We will find out what number to add to $m$ to arrive at an unbiased estimate of $n$.</p><h2 id=the-likelihood-prmmn>the likelihood $Pr(M=m|n)$</h2><p>Let $M$ be the random variable that is the maximum serial number.
We wish to derive the probability that the max serial number is $m$, given the total number of tanks is $n$, $Pr(M=m|n)$. Because the dgp is a uniform probability on the sample space,
$$Pr(M=m|n)=\dfrac{|\text{subset of sample space such that } m=\max x_i|}{|\text{sample space}|}$$</p><p>The cardinality of the sample space, we argued, is $\binom{n}{k}$. The schematic below illustrates that the cardinality of the subset of the sample space such that the max serial number is $m$ is $\binom{m-1}{k-1}$. i.e., if the max serial number is $m$, this gives us $k-1$ remaining tanks to select from the $m-1$ tanks with a serial number less than $m$.
$$Pr(M=m|n) = \dfrac{\binom{m-1}{k-1}}{\binom{n}{k}}$$
This distribution pertains only to $m$ such that $n \geq m\geq k$ since the max serial number cannot be more than the total number of tanks or less than the number of captured tanks.</p><figure><img src=/blog/german_tank_problem/show_formula.png alt="Count the number of sets of $k$ serial numbers such that the maximum serial number is $m$. Obviously, one of the $k$ captured tanks must have serial number $m$. Then, the remaining $k-1$ tanks must have been selected from the $m-1$ tanks preceding the tank with the max serial number $m$. Thus, the number of outcomes such that the max serial number is $m$ is equal to the number of ways to choose $k-1$ tanks from $m-1$ labeled tanks, without replacement, where order does not matter."><figcaption><p>Count the number of sets of $k$ serial numbers such that the maximum serial number is $m$. Obviously, one of the $k$ captured tanks must have serial number $m$. Then, the remaining $k-1$ tanks must have been selected from the $m-1$ tanks preceding the tank with the max serial number $m$. Thus, the number of outcomes such that the max serial number is $m$ is equal to the number of ways to choose $k-1$ tanks from $m-1$ labeled tanks, without replacement, where order does not matter.</p></figcaption></figure><h3 id=a-useful-identity-from-the-normalization-of-the-probability-mass-function>a useful identity from the normalization of the probability mass function</h3><p>Since $n \geq m \geq k$:
$$1= \sum_{m=k}^n Pr(M=m|n) = \sum_{m=k}^n \dfrac{\binom{m-1}{k-1}}{\binom{n}{k}}$$
i.e. the probability that $m$ is (inclusive) between $k$ and $m$ is one. The $P(M=m|n)$ sum to one because the event that the max serial number is $\theta$ is independent from the event that the max serial number is $\beta \neq \theta$.
This gives us an identity that we will use later:
$$\binom{n}{k} = \sum_{m=k}^n \binom{m-1}{k-1}$$</p><p>This identity has an intuitive interpretation. The sample space for the German tank problem is the union of the following disjoint sets of outcomes: the set of outcomes where the max serial number $m$ is $k$, the set of outcomes where the max serial number is $k+1$, &mldr;, the set of outcomes where the max serial number is $n$.</p><h2 id=the-expected-value-of-the-max-serial-number-emmn>the expected value of the max serial number, $E(M=m|n)$</h2><p>Now let us find the expected value of $M$ over the outcomes of our dgp.
$$E(M | n) = \displaystyle \sum_{m=k}^n m Pr(M=m|n)$$
We&rsquo;re conditioning on knowing $n$, which seems awkward because the whole point of the German tank problem is that we don&rsquo;t know $n$. Our strategy here is to find $E(M | n)$, then find what $n$ gives an expected value of $M$ equal to the $m$ we observed. This gives an unbiased estimator for $n$. Using our expression for $Pr(M=m|n)$ above:
$$E(M | n) = \sum_{m=k}^n m \frac{\binom{m-1}{k-1}}{\binom{n}{k}}$$
The sum is over $m$, so we can pull the denominator outside of the sum. Also, we can write this as a sum over combinations by multiplying by one in a fancy way and absorbing the $m$ and $k$ into the factorial terms:
$$E(M | n) = \dfrac{1}{\binom{n}{k}} \sum_{m=k}^n \frac{k}{k} m \frac{(m-1)!}{(k-1)!(m-k)!}$$
$$E(M | n) = \dfrac{k}{\binom{n}{k}} \sum_{m=k}^n \frac{m!}{k!(m-k)!}$$
$$E(M | n) = \dfrac{k}{\binom{n}{k}} \sum_{m=k}^n \binom{m}{k}$$</p><p>The sum can be simplified by writing our identity above for a situation where we select $k+1$ tanks from a population of $n+1$ tanks:
$$\binom{n+1}{k+1} = \sum_{m=k+1}^{n+1} \binom{m-1}{k}$$
since then the max serial number can run from $k+1$ to $n+1$, and the remaining $k$ tanks must have serial numbers less then $m$. A change of variables $\theta := m -1$ then gives:
$$\binom{n+1}{k+1} = \sum_{\theta=k}^{n} \binom{\theta}{k}$$</p><p>This identitiy allows us to simplify the expression for $E(M | n)$:
$$E(M | n) = \dfrac{k}{\binom{n}{k}} \binom{n+1}{k+1}$$</p><p>Expanding the combinations into factorials and canceling terms, finally:
$$E(M | n) = \dfrac{k}{k+1}(n+1)$$
For $k=5$, we get $E(M | n=100)$ is ca. 84.2, comparable to our simulation above.</p><h2 id=an-unbiased-estimator>an unbiased estimator</h2><p>We arrive at an unbiased estimator for $n$, $\hat{n}$, by replacing $E(M | n)$ in the expression above with our observation $m\equiv\max x_i$, then solving for $n$. That is, our estimate for the total number of German tanks is the $n$ such that the expected value of $M$ under the dgp is equal to our observed $m$.
$$\hat{n} = m + \left(\frac{m}{k} - 1\right).$$</p><p>Indeed, the estimate of the total number of tanks is the maximum serial number observed <em>plus</em> $m/k-1$ to reflect the small likelihood (provided $k&#171;n$) of selecting the most recently manufactured tanks (as opposed to not selecting them). Intuitively, this number gets larger as $m / k$ increases, i.e. when we expect to see large gaps between the observed (and sorted) serial numbers.</p><p>This estimator $\hat{n}$ has an intuitive interpretation. Imagine sorting and placing all of the tanks in a line, from 1 to $n$. Then imagine if the tanks we captured were evenly spaced, i.e. had equal gaps of unobserved tanks between them (including the beginning and end). The number that we add to $m$ to arrive at the estimate, $m/k-1$, is the size of the gap, i.e. number of unobserved tanks, between the sampled tanks. So our estimate for the number of tanks is the max serial number plus the number of unobserved tanks in the gap between captured tanks, if the serial numbers had been evenly spaced. I have not proven it yet, but I suspect that $m/k-1$ is the expected gap between the sorted serial numbers of the captured tanks.</p><figure><img src=/blog/german_tank_problem/seven_tanks.png alt="If the $k$ captured tanks are evenly spaced among the $n$ (sorted) total tanks, then the number of unobserved tanks between each captured tank is $m/k-1$. Consider $n=7$ and $k=3$ with captured tanks labeled red ($m=6$). Here, each captured tank is flanked by $6/3-1=1$ unobserved tank on each side."><figcaption><p>If the $k$ captured tanks are evenly spaced among the $n$ (sorted) total tanks, then the number of unobserved tanks between each captured tank is $m/k-1$. Consider $n=7$ and $k=3$ with captured tanks labeled red ($m=6$). Here, each captured tank is flanked by $6/3-1=1$ unobserved tank on each side.</p></figcaption></figure><p>The estimator $\hat{n}$ for the total number of tanks is unbiased. To illustrate, I ran 100,000 simulations of the dgp with $n=100$ and $k=5$ using the <code>capture_tanks</code> function, then used $\hat{n}$ above to estimate the number of tanks from the max serial number in each simulated outcome (and $k$). The distribution of the estimated number of tanks $\hat{n}$ among the simulations is shown below.</p><figure><img src=/blog/german_tank_problem/max_serial_no_plus_gap_if_evenly_spaced.png alt="The estimator $\hat{n}$ is unbiased since, over many simulations, its average value is the true number of tanks."><figcaption><p>The estimator $\hat{n}$ is unbiased since, over many simulations, its average value is the true number of tanks.</p></figcaption></figure><p>One can also show that the estimator $\hat{n}$ is <em>efficient</em> [1], meaning that it exhibits the smallest variance among all other unbiased estimators.</p><p>Another desirable property of an estimator is <em>consistency</em>. Loosely, this means the distribution of the estimator $\hat{n}$ will concentrate on the true population size, $n$, as $k$ increases. That is, as we capture more tanks (increase $k$), the population estimate becomes more likely to be near the true population size. In the extreme case of $k=n$, we will always correctly estimate $n$. Below, I show the distribution of the estimated number of tanks $\hat{n}$ among 100,000 simulations ($n=100$) for several different values of $k$. Indeed, the distribution concentrates on the true number of tanks as $k$ increases, suggesting that this estimator is consistent. If we have more data, our estimate is likely to be better.</p><figure><img src=/blog/german_tank_problem/consistency.png alt="Computationally exploring the consistency of $\hat{n}$. The distribution of the estimated number of tanks concentrates on the true number of tanks as we capture more tanks."><figcaption><p>Computationally exploring the consistency of $\hat{n}$. The distribution of the estimated number of tanks concentrates on the true number of tanks as we capture more tanks.</p></figcaption></figure><h1 id=confidence-intervals>confidence intervals</h1><p>Our estimate $\hat{n}$ is a <em>point</em> estimate. In an <em>interval</em> estimate, we desire to estimate an interval in which the number of tanks belongs, which is associated with a confidence. The idea behind &ldquo;confidence&rdquo; is as follows. Say the maximum serial number we observed is $m=100$ with a sample size of $k=10$, and consider the hypothesis that the Germans have $10,000$ tanks. It could totally be true that we happened to capture only from within the first $100$ tanks of the $10,000$; we cannot disprove this hypothesis from our sample. However, given that $n=10,000$, it is an unlikely outcome that all $k=10$ tanks were sampled from only the first $100$ of the $10,000$ tanks; it is more likely to have a larger max serial number than $100$ if there were $10,000$ tanks. This gives us some confidence that the Germans have <em>less</em> than $10,000$ tanks.</p><p>Here is a computational and conceptually illustrative way to obtain a confidence interval for the number of tanks (using $k=10$, 200,000 simulations for each $n$).
The solid line in the plot below shows the mean estimate of the number of tanks as a function of $n$. Because this is an unbiased estimator, this is a diagonal line with slope 1 and intercept 0.
The green shaded band surrounding the mean excludes the bottom 5% and top 5% of the estimates.
Now, imagine we observed $m=110$, giving the estimate shown as the horizontal dashed line.
Our 90% confidence interval, based on these simulations, is shown as the purple bar on the $n$-axis.
The lower bound is set at the lowest $n$ that would give us an estimate that high, excluding the top 5% of estimates.
The upper bound is set at the highest $n$ that would give us an estimate this low, excluding the bottom 5% of estimates.
For example, with $m=110$, we would reject the null hypothesis that $n>150$ at a level of significance of 5%, since it is sufficiently unlikely that the max serial number would be so low (110) if there were truly more than 150 tanks.</p><figure><img src=/blog/german_tank_problem/confidence.png alt="The estimate of $n$, $\hat{n}$, versus the true $n$. The green shaded band excludes the top 5% and bottom 5% of estimates. Here, $k=10$. The red, horizontal, dashed line shows the estimate for an observation $m=110$, and the purple band on the $n$-axis shows the confidence interval."><figcaption><p>The estimate of $n$, $\hat{n}$, versus the true $n$. The green shaded band excludes the top 5% and bottom 5% of estimates. Here, $k=10$. The red, horizontal, dashed line shows the estimate for an observation $m=110$, and the purple band on the $n$-axis shows the confidence interval.</p></figcaption></figure><h2 id=update-a-bayesian-treatment-of-the-german-tank-problem>(update) A Bayesian treatment of the German tank problem</h2><p>See my preprint &ldquo;A Bayesian treatment of the German tank problem&rdquo; on arXiv <a href=https://arxiv.org/abs/2301.00046>here</a>.</p><h1 id=references>references</h1><p>[0] J. Champkin. The German tank problem. Great moments in statistics. <a href=https://rss.onlinelibrary.wiley.com/doi/pdf/10.1111/j.1740-9713.2013.00706.x>https://rss.onlinelibrary.wiley.com/doi/pdf/10.1111/j.1740-9713.2013.00706.x</a> &lt;&ndash; fantastic overview</p><p>[1] Goodman LA. Serial number analysis. Journal of the American Statistical Association. 1952</p><p>[2] Ruggles R, Brodie H. An empirical approach to economic intelligence in World War II. Journal of the American Statistical Association. 1947</p><p>[3] KC Border&rsquo;s Introduction to Probability and Statistics notes <a href=http://www.math.caltech.edu/~2016-17/2term/ma003/Notes/Lecture18.pdf>http://www.math.caltech.edu/~2016-17/2term/ma003/Notes/Lecture18.pdf</a></p><p>[4] Johnson RW. Estimating the size of a population. Teaching Statistics. 1994 &lt;&ndash; gives nice intuitive arguments</p></div></article><div class=blog-post-comments><div id=disqus_thread><script type=text/javascript>(function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="The Simon Research Ensemble",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/students>students</a></li><li><a href=/pubs>pubs</a></li><li><a href=/theprof>the prof</a></li><li><a href=/news>news</a></li><li><a href=/teaching>teaching</a></li><li><a href=/posts>blog</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#the-likelihood-prmmn>the likelihood $Pr(M=m|n)$</a><ul><li><a href=#a-useful-identity-from-the-normalization-of-the-probability-mass-function>a useful identity from the normalization of the probability mass function</a></li></ul></li><li><a href=#the-expected-value-of-the-max-serial-number-emmn>the expected value of the max serial number, $E(M=m|n)$</a></li><li><a href=#an-unbiased-estimator>an unbiased estimator</a></li></ul><ul><li><a href=#update-a-bayesian-treatment-of-the-german-tank-problem>(update) A Bayesian treatment of the German tank problem</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&text=the%20German%20tank%20problem" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&title=the%20German%20tank%20problem" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&is_video=false&description=the%20German%20tank%20problem" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=the%20German%20tank%20problem&body=Check out this article: https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&title=the%20German%20tank%20problem" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&title=the%20German%20tank%20problem" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&name=the%20German%20tank%20problem&description=author%3a%20Cory%20Simon%0aThe%20German%20tank%20problem%20%5b1%5d%20is%20intellectually%20stimulating%20and%20makes%20great%20conversation%20at%20wine%20bars.%20The%20problem%20has%20a%20historical%20context%20as%20well%20%5b2%5d.%0aDuring%20World%20War%202%2c%20the%20Germans%20inscribed%20their%20tanks%20with%20sequential%20serial%20numbers%20%241%2c2%2c%26hellip%3b%2cn%24%20when%20they%20were%20manufactured.%20The%20total%20number%20of%20tanks%20%24n%24%20that%20the%20Germans%20had%2c%20however%2c%20was%20unknown%20to%20the%20Allied%20forces%26ndash%3b%20and%20of%20great%20interest.%0aThe%20Allies%20captured%20a%20%28assumed%29%20random%20sample%20of%20%24k%24%20tanks%20from%20the%20German%20forces%20%28without%20replacement%2c%20of%20course%29%20and%20observed%20their%20serial%20numbers%2c%20%24x_1%2cx_2%2c%26hellip%3b%2cx_k%24." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fsimonensemble.github.io%2fposts%2f2019-11-15-german-tank-problem%2f&t=the%20German%20tank%20problem" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2024 The Simon Research Ensemble</div><div class=footer-right><nav><ul><li><a href=/students>students</a></li><li><a href=/pubs>pubs</a></li><li><a href=/theprof>the prof</a></li><li><a href=/news>news</a></li><li><a href=/teaching>teaching</a></li><li><a href=/posts>blog</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
<script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>